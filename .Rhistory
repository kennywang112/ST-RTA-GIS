# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 1.6,
num_cores = 12
)
MapperPlotter(Mapper,
label=all_features$hotspot,
data=filter_data,
type="forceNetwork",
avg=TRUE,
use_embedding=FALSE)
Mapper <- MapperAlgo(
filter_values = n_data[,1:5],
percent_overlap = 0.3,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 1.5,
num_cores = 12
)
MapperPlotter(Mapper,
label=all_features$hotspot,
data=filter_data,
type="forceNetwork",
avg=TRUE,
use_embedding=FALSE)
Mapper <- MapperAlgo(
filter_values = n_data[,1:5],
percent_overlap = 0.4,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 1.5,
num_cores = 12
)
MapperPlotter(Mapper,
label=all_features$hotspot,
data=filter_data,
type="forceNetwork",
avg=TRUE,
use_embedding=FALSE)
Mapper <- MapperAlgo(
filter_values = n_data[,1:5],
percent_overlap = 0.3,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 1.2,
num_cores = 12
)
MapperPlotter(Mapper,
label=all_features$hotspot,
data=filter_data,
type="forceNetwork",
avg=TRUE,
use_embedding=FALSE)
Mapper <- MapperAlgo(
filter_values = n_data[,1:5],
percent_overlap = 0.3,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 1.4,
num_cores = 12
)
MapperPlotter(Mapper,
label=all_features$hotspot,
data=filter_data,
type="forceNetwork",
avg=TRUE,
use_embedding=FALSE)
time_taken <- system.time({
Mapper <- MapperAlgo(
filter_values = n_data[,1:5],
percent_overlap = 0.3,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 1.5,
num_cores = 12
)
})
MapperPlotter(Mapper,
label=all_features$hotspot,
data=filter_data,
type="forceNetwork",
avg=TRUE,
use_embedding=FALSE)
library(tidyverse)
library(MapperAlgo)
library(igraph)
library(networkD3)
library(ggraph)
library(tidygraph)
filter_data <- read_csv("../ST-RTA/ComputedDataV4/ForModel/filtered_dataV1.csv")
filter_data%>%summary()
source('../TDA-R/MapperAlgo/R/Plotter.R')
all_features <- read_csv("../ST-RTA/ComputedDataV4/ForModel/all_features.csv")
all_features$hotspot <- case_when(
all_features$hotspot == 'Not Significant' ~ 0,
TRUE ~ 1
)
all_features$`號誌-號誌種類名稱_行車管制號誌` <- ifelse(all_features$`號誌-號誌種類名稱_行車管制號誌` > 0, 1, 0)
table(all_features[, c("hotspot", "號誌-號誌種類名稱_行車管制號誌")])
all_features <- all_features%>%
mutate(
bn_feature = ifelse(
(
(
(`車道劃分設施-分道設施-路面邊線名稱_無` > 0)
) &
(
(`當事者區分-類別-大類別名稱-車種_小客車(含客、貨兩用)` > 0)
) &
(
(`cause-group_Decision` > 0)
)
),
1,
0
)
)
all_features$bn_feature%>%table()
# normalize
n_data <- as.data.frame(scale(filter_data))
time_taken <- system.time({
Mapper <- MapperAlgo(
filter_values = n_data[,1:5],
percent_overlap = 0.3,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 1.5,
num_cores = 12
)
})
MapperPlotter(Mapper,
label=all_features$hotspot,
data=filter_data,
type="forceNetwork",
avg=TRUE,
use_embedding=FALSE)
Mapper <- MapperAlgo(
filter_values = n_data[,1:5],
percent_overlap = 0.5,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 1.5,
num_cores = 12
)
MapperPlotter(Mapper,
label=all_features$hotspot,
data=filter_data,
type="forceNetwork",
avg=TRUE,
use_embedding=FALSE)
all_features
all_features%>%colnames()
filter_data <- read_csv("../ST-RTA/ComputedDataV4/ForModel/filtered_dataV1.csv")
filter_data%>%summary()
source('../TDA-R/MapperAlgo/R/Plotter.R')
all_features <- read_csv("../ST-RTA/ComputedDataV4/ForModel/all_features.csv")
all_features$hotspot <- case_when(
all_features$hotspot == 'Not Significant' ~ 0,
TRUE ~ 1
)
all_features$`號誌-號誌種類名稱_行車管制號誌` <- ifelse(all_features$`號誌-號誌種類名稱_行車管制號誌` > 0, 1, 0)
table(all_features[, c("hotspot", "號誌-號誌種類名稱_行車管制號誌")])
all_features%>%colnames()
# do pca
pca <- prcomp(all_features%>%select(-hotspot), center = TRUE, scale. = TRUE)
pca
View(pca)
pca$x
dt <- pca$x
time_taken <- system.time({
Mapper <- MapperAlgo(
filter_values = dt[,1:5],
percent_overlap = 0.3,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 1.5,
num_cores = 12
)
})
dt[,1:5]
3.202489e-01
time_taken <- system.time({
Mapper <- MapperAlgo(
filter_values = dt[,1:5],
percent_overlap = 0.3,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 0.3,
num_cores = 12
)
})
Mapper <- MapperAlgo(
filter_values = dt[,1:5],
percent_overlap = 0.3,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 0.3,
num_cores = 12
)
Mapper <- MapperAlgo(
filter_values = dt[,1:5],
percent_overlap = 0.3,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 1,
num_cores = 12
)
Mapper <- MapperAlgo(
filter_values = dt[,1:2],
percent_overlap = 0.3,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 1,
num_cores = 12
)
dt[,1:2]
time_taken <- system.time({
Mapper <- MapperAlgo(
filter_values = dt[,1:2],
percent_overlap = 0.3,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 1,
num_cores = 12
)
})
time_taken <- system.time({
Mapper <- MapperAlgo(
filter_values = dt[,1:3],
percent_overlap = 0.3,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 1,
num_cores = 12
)
})
library(tidyverse)
library(MapperAlgo)
library(igraph)
library(networkD3)
library(ggraph)
library(tidygraph)
filter_data <- read_csv("../ST-RTA/ComputedDataV4/ForModel/filtered_dataV1.csv")
filter_data%>%summary()
source('../TDA-R/MapperAlgo/R/Plotter.R')
all_features <- read_csv("../ST-RTA/ComputedDataV4/ForModel/all_features.csv")
all_features$hotspot <- case_when(
all_features$hotspot == 'Not Significant' ~ 0,
TRUE ~ 1
)
all_features$`號誌-號誌種類名稱_行車管制號誌` <- ifelse(all_features$`號誌-號誌種類名稱_行車管制號誌` > 0, 1, 0)
table(all_features[, c("hotspot", "號誌-號誌種類名稱_行車管制號誌")])
all_features <- all_features%>%
mutate(
bn_feature = ifelse(
(
(
(`車道劃分設施-分道設施-路面邊線名稱_無` > 0)
) &
(
(`當事者區分-類別-大類別名稱-車種_小客車(含客、貨兩用)` > 0)
) &
(
(`cause-group_Decision` > 0)
)
),
1,
0
)
)
all_features$bn_feature%>%table()
# normalize
n_data <- as.data.frame(scale(filter_data))
source('../TDA-R/MapperAlgo/R/MapperAlgo')
source('../TDA-R/MapperAlgo/R/MapperAlgo.R')
library(umap)
install.packages('umap')
umap_acc <- umap(n_data[,1:5])
library(umap)
umap_acc <- umap(n_data[,1:5])
umap_acc
all_features$bn_feature%>%table()
# normalize
n_data <- as.data.frame(scale(filter_data))
time_taken <- system.time({
Mapper <- MapperAlgo(
filter_values = n_data[,1:5],
percent_overlap = 0.3,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 1.5,
num_cores = 12
)
})
library(MapperAlgo)
time_taken <- system.time({
Mapper <- MapperAlgo(
filter_values = n_data[,1:5],
percent_overlap = 0.3,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 1.5,
num_cores = 12
)
})
library(tidyverse)
library(igraph)
library(networkD3)
library(ggraph)
library(tidygraph)
library(MapperAlgo)
filter_data <- read_csv("../ST-RTA/ComputedDataV4/ForModel/filtered_dataV1.csv")
filter_data%>%summary()
source('../TDA-R/MapperAlgo/R/Plotter.R')
all_features <- read_csv("../ST-RTA/ComputedDataV4/ForModel/all_features.csv")
all_features$hotspot <- case_when(
all_features$hotspot == 'Not Significant' ~ 0,
TRUE ~ 1
)
all_features$`號誌-號誌種類名稱_行車管制號誌` <- ifelse(all_features$`號誌-號誌種類名稱_行車管制號誌` > 0, 1, 0)
table(all_features[, c("hotspot", "號誌-號誌種類名稱_行車管制號誌")])
all_features <- all_features%>%
mutate(
bn_feature = ifelse(
(
(
(`車道劃分設施-分道設施-路面邊線名稱_無` > 0)
) &
(
(`當事者區分-類別-大類別名稱-車種_小客車(含客、貨兩用)` > 0)
) &
(
(`cause-group_Decision` > 0)
)
),
1,
0
)
)
all_features$bn_feature%>%table()
# normalize
n_data <- as.data.frame(scale(filter_data))
time_taken <- system.time({
Mapper <- MapperAlgo(
filter_values = n_data[,1:5],
percent_overlap = 0.3,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 1.5,
num_cores = 12
)
})
install.packages('makeCluster')
time_taken <- system.time({
Mapper <- MapperAlgo(
filter_values = n_data[,1:5],
percent_overlap = 0.3,
# methods = "dbscan",
# method_params = list(eps = 0.3, minPts = 3),
# methods = "hierarchical",
# method_params = list(num_bins_when_clustering = 10, method = 'ward.D2'),
methods = "kmeans",
method_params = list(max_kmeans_clusters = 3),
# methods = "pam",
# method_params = list(num_clusters = 2),
cover_type = 'stride',
# intervals = 4,
interval_width = 1.5,
num_cores = 12
)
})
