neighbors <- which(adj_matrix[i, ] > 0)
return(neighbors[neighbors != i]) # 移除自己
})
# find total unique indices
uniq_idx <- sort(unique(unlist(Mapper$points_in_vertex, use.names = FALSE)))
length(uniq_idx) == dim(all_features)[1]
## Betweenness and Eigenvector Centrality
g <- graph_from_adjacency_matrix(Mapper$adjacency, mode = "undirected")
e_result <- eigen_centrality(g)
e_scores <- e_result$vector
b_scores <- betweenness(g, normalized = TRUE)
# 找橋樑
top_nodes <- sort(b_scores, decreasing = TRUE)
print(head(top_nodes, 10))
source('./Analyze/SNAplot.R')
MapperPlotterV2(
Mapper,
label = e_scores,
data = filter_data,
is_node_attribute = TRUE
)
MapperPlotterV2(
Mapper,
label = all_features$hotspot,
data = filter_data,
avg=TRUE,
is_node_attribute = FALSE
)
################ save ################
library(jsonlite)
export_data <- list(
adjacency = Mapper$adjacency,
num_vertices = Mapper$num_vertices,
level_of_vertex = Mapper$level_of_vertex,
points_in_vertex = Mapper$points_in_vertex,
original_data = as.data.frame(all_features)
)
e_scores
b_scores
MapperPlotterV2(
Mapper,
label = b_scores,
data = filter_data,
is_node_attribute = TRUE
)
MapperPlotterV2(
Mapper,
label = e_scores,
data = filter_data,
is_node_attribute = TRUE
)
length(Mapper$points_in_level_set)
length(Mapper$points_in_level_set)
unique_indexes <- unique(unlist(Mapper$points_in_vertex))
unique_indexes%>%length()
unique_levelset <- unique(unlist(Mapper$points_in_level_set))
unique_levelset%>%length()
b_scores
g
length(g)
length(g) = length(e_scores)
length(g)
length(e_scores)
## Betweenness and Eigenvector Centrality
g <- graph_from_adjacency_matrix(Mapper$adjacency, mode = "undirected")
e_result <- eigen_centrality(g)
e_scores <- e_result$vector
b_scores <- betweenness(g, normalized = TRUE)
# 找橋樑
top_nodes <- sort(b_scores, decreasing = TRUE)
print(head(top_nodes, 10))
e_scores
b_scores
length(g)
length(e_scores)
MapperPlotterV2(
Mapper,
label = b_scores,
data = filter_data,
is_node_attribute = TRUE
)
MapperPlotterV2(
Mapper,
label = all_features$hotspot,
data = filter_data,
avg=TRUE,
is_node_attribute = FALSE
)
MapperPlotterV2(
Mapper,
label = b_scores,
data = filter_data,
is_node_attribute = TRUE
)
################# SNA ###################
adj_matrix <- Mapper$adjacency
adj_list <- lapply(1:Mapper$num_vertices, function(i) {
neighbors <- which(adj_matrix[i, ] > 0)
return(neighbors[neighbors != i]) # 移除自己
})
# find total unique indices
uniq_idx <- sort(unique(unlist(Mapper$points_in_vertex, use.names = FALSE)))
length(uniq_idx) == dim(all_features)[1]
## Betweenness and Eigenvector Centrality
g <- graph_from_adjacency_matrix(Mapper$adjacency, mode = "undirected")
e_result <- eigen_centrality(g)
e_scores <- e_result$vector
b_scores <- betweenness(g, normalized = TRUE)
# 找橋樑
top_nodes <- sort(b_scores, decreasing = TRUE)
print(head(top_nodes, 10))
length(g)
length(e_scores)
length(uniq_idx)
Mapper$adjacency
adj_matrix
adj_list
length(g)
length(e_scores)
adj_list
for (i in adj_list) {
print(i)
}
# create dataframe
data.frame(x = 1, y=1:10)
# create dataframe
data.frame(x = 1, 'escore' = e_scores)
# create dataframe
data.frame(x = 1, 'eigen_centrality' = e_scores, 'betweenness' = b_scores)
# create dataframe
data.frame(x = adj_list, 'eigen_centrality' = e_scores, 'betweenness' = b_scores)
adj_list
for (i in adj_list) {
adj_var <- c(adj_var, i)
}
adj_var <- c()
for (i in adj_list) {
adj_var <- c(adj_var, i)
}
adj_var
adj_list
for (i in adj_list) {
# adj_var <- c(adj_var, i)
print(i)
}
adj_var <- c()
for (i in adj_list) {
adj_var <- c(adj_var, [i])
adj_var <- c()
adj_var <- c()
for (i in adj_list) {
f_i <- c(i)
adj_var <- c(adj_var, f_i)
}
adj_var
adj_var <- c()
for (i in adj_list) {
f_i <- c([i])
adj_var <- c()
for (i in adj_list) {
f_i <- c(i)
print(f_i)
# adj_var <- c(adj_var, f_i)
}
adj_var <- c()
for (i in adj_list)
adj_var <- c()
for (i in adj_list) {
print(list(i))
# adj_var <- c(adj_var, f_i)
}
adj_var <- c()
for (i in adj_list) {
adj_var <- c(adj_var, list(i))
}
View(adj_var)
data.frame(x = adj_var, 'eigen_centrality' = e_scores, 'betweenness' = b_scores)
adj_var
View(adj_var)
data.frame(x = adj_var, 'eigen_centrality' = e_scores, 'betweenness' = b_scores)
for (i in adj_list) {
print(list(i))
# adj_var <- c(adj_var, list(i))
}
for (i in adj_list) {
for (j in i) {
print(j)
}
# adj_var <- c(adj_var, list(i))
}
for (i in adj_list) {
tempt <- c()
for (j in i) {
tempt <- c(tempt, j)
}
print(tempt)
# adj_var <- c(adj_var, list(i))
}
adj_var <- c()
for (i in adj_list) {
tempt <- c()
for (j in i) {
tempt <- c(tempt, j)
}
print(tempt)
adj_var <- c(adj_var, tempt)
}
adj_var <- c()
for (i in adj_list) {
tempt <- c()
for (j in i) {
tempt <- c(tempt, j)
}
print(tempt)
adj_var <- c(adj_var, tempt)
}
adj_var <- c()
for (i in adj_list) {
tempt <- c()
for (j in i) {
tempt <- c(tempt, j)
}
print(tempt)
# adj_var <- c(adj_var, tempt)
}
adj_var <- c()
for (i in adj_list) {
tempt <- c()
for (j in i) {
tempt <- c(tempt, j)
}
print(list(tempt))
# adj_var <- c(adj_var, tempt)
}
adj_var <- c()
for (i in adj_list) {
tempt <- c()
for (j in i) {
tempt <- c(tempt, j)
}
print(list(tempt))
adj_var <- c(adj_var, list(tempt))
}
View(adj_var)
adj_list
data.frame('eigen_centrality' = e_scores, 'betweenness' = b_scores)
features <- data.frame('eigen_centrality' = e_scores, 'betweenness' = b_scores)
View(features)
correlation
length(g)
length(e_scores)
features
adj_matrix
features[0,1]
features[1,1]
features[1,2]
features[1,3]
for(i in adj_list) {
print(i)
}
seq(1, 9, by = 2)
length(adj_list)
for(i in 1:length(adj_list)) {
print(i)
}
for(i in 1:length(adj_list)) {
print(adj_list[i])
}
print(j)
for(i in 1:length(adj_list)) {
for (j in i) {
print(j)
}
}
print(i)
for(i in 1:length(adj_list)) {
print(i)
}
for(i in 1:length(adj_list)) {
print(adj_list[i])
}
for(i in 1:length(adj_list)) {
features[i,3] <- adj_list[i]
}
for(i in 1:length(adj_list)) {
print(i)
features[i, 3] <- adj_list[i]
}
features[1, 3]
features[1, 3] <-  adj_list[1]
features[1, 3] <-  adj_list[1]
adj_list[1]
length(adj_list[1])
adj_list[1] == 0
adj_list[1] == integer(0)
adj_list[2] == integer(0)
adj_list[5] == integer(0)
adj_list[1]
adj_list[2]
adj_list[3]
adj_list[10]
adj_list[13] == integer(0)
adj_list[13]
adj_list[13] length(adj_list)
View(adj_list)
adj_list[14] length(adj_list)
adj_list[14]
length(adj_list[14])
adj_list[14] > 0
adj_list[13] > 0
(adj_list[13] > 0) || (length(adj_list[13]) > 1)
length(adj_list[13]) > 1
adj_list[13]
length(adj_list[13]) > 1
length(adj_list[13])
length(adj_list[13])
adj_list[13] > 0
adj_list[13]
adj_list[[13]] > 0
adj_list[[10]]
adj_list[[13]][1]
for(i in 1:length(adj_list)) {
print(adj_list[[i]])
# if length()
# features[i, 3] <- adj_list[i]
}
adj_list[[10]]
adj_list[[1]] == 0
adj_list[[9]] == 0
adj_list[[9]]
adj_list[[7]]
adj_list[[7]] == 0
adj_list[[7]] == TRUE
adj_list[[7]] == FALSE
adj_list[[7]]
View(adj_list)
value(adj_list[[7]])
adj_list[[7]]
adj_list
adj_list[[13]]
adj_list
adj_list[[7]]
features[1, 3] <- adj_list[1]
adj_list[1]
features
adj_list[1]
features[1, 3] <- adj_list[1]
features[1, 3]
features[1, 3] <- 1
features[1, 3] <- adj_list[1]
features[1, 3]
features
View(adj_list)
Mapper$num_vertices
adj_matrix
adj_matrix[1,]
adj_list
################# SNA ###################
adj_matrix <- Mapper$adjacency
adj_list <- lapply(1:Mapper$num_vertices, function(i) {
neighbors <- which(adj_matrix[i, ] > 0)
print(neighbors)
return(neighbors[neighbors != i]) # 移除自己
})
features
if (adj_list[0]) {
print('hi')
}
adj_list[0]
adj_list <- lapply(1:Mapper$num_vertices, function(i) {
neighbors <- which(adj_matrix[i, ] > 0)
return(neighbors[neighbors != i]) # 移除自己
})
if (adj_list[0]) {
print('hi')
}
adj_list
adj_list[0]
if (adj_list[[1]]) {
print('hi')
}
adj_list[[1]]
if (adj_list[0]) {
print('hi')
}
adj_list[0]
length(adj_list[0])
for( i in adj_list) {
if (length(i[0]) > 0) {
print(paste('hi in ', i))
}
}
for( i in adj_list) {
print(i)
if (length(i[0]) > 0) {
print(paste('hi in ', i))
}
}
for( i in adj_list) {
)
length(i[0]
length(i[0]
adj_list
for( i in adj_list) {
for( i in adj_list) {
print(length(i[0]))
if (length(i[0]) > 0) {
print(paste('hi in ', i))
}
}
)
for( i in adj_list) {
print(length(i[0]))
# if (length(i[0]) > 0) {
#   print(paste('hi in ', i))
# }
}
for(i in 1:length(adj_list)) {
print(length(adj_list[0]))
# if (length(i[0]) > 0) {
#   print(paste('hi in ', i))
# }
}
for(i in 1:length(adj_list)) {
print(length(adj_list[i]))
# if (length(i[0]) > 0) {
#   print(paste('hi in ', i))
# }
}
for(i in 1:length(adj_list)) {
print(i)
# print(length(adj_list[i]))
# if (length(i[0]) > 0) {
#   print(paste('hi in ', i))
# }
}
for(i in 1:length(adj_list)) {
print(adj_list[i])
# print(length(adj_list[i]))
# if (length(i[0]) > 0) {
#   print(paste('hi in ', i))
# }
}
length(adj_list[1])
length(adj_list[1])
adj_list[1]
adj_list[[1]]
length(adj_list[[1]])
length(adj_list[[2]])
length(adj_list[[300]])
adj_list
length(adj_list[[425]])
for(i in 1:length(adj_list)) {
for(i in 1:length(adj_list)) {
print(adj_list[[i]])
# print(length(adj_list[i]))
# if (length(i[0]) > 0) {
#   print(paste('hi in ', i))
# }
}
)
for(i in 1:length(adj_list)) {
print(adj_list[[i]])
# print(length(adj_list[i]))
# if (length(i[0]) > 0) {
#   print(paste('hi in ', i))
# }
}
for(i in 1:length(adj_list)) {
print(length(adj_list[[i]]))
# print(length(adj_list[i]))
# if (length(i[0]) > 0) {
#   print(paste('hi in ', i))
# }
}
for(i in 1:length(adj_list)) {
if (length(adj_list[[i]]) > 0) {
print(paste('hi in ', i))
}
}
for(i in 1:length(adj_list)) {
if (length(adj_list[[i]]) > 0) {
features[i, 3] <- adj_list[[i]]
}
}
for(i in 1:length(adj_list)) {
if (length(adj_list[[i]]) > 0) {
features[i, 3] <- list(adj_list[[i]])
}
}
features
View(features)
adj_list
adj_list[[418]]
list(adj_list[[418]])
features[418, 3] <- list(adj_list[[418]])
features[418, 3]
adj_list
for(i in 1:length(adj_list)) {
features$neighbors[[i]] <- adj_list[[i]]
}
features
features <- data.frame('eigen_centrality' = e_scores, 'betweenness' = b_scores)
for(i in 1:length(adj_list)) {
features$neighbors[[i]] <- adj_list[[i]]
}
features <- tibble(
eigen_centrality = e_scores,
betweenness = b_scores,
neighbors = adj_list
)
features
